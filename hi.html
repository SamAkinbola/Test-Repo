#controls when the action will run on: push: branches: - dev jobs: deploy:
runs-on: ubuntu-latest steps: #Checkout your repository so your job can access
it - name: Checkout repository uses: actions/checkout@v4 - name: Setup Python
3.10 uses: actions/setup-python@v4 with: python version: '3.10' - name: Install
Python packages run: pip install -r requirements.txt - name: Configure SnowCLI
env: SNOWFLAKE_ACCOUNT: ${{ secrets.SNOWFLAKE_ACCOUNT }} run: cd
$GITHUB_WORKSPACE echo "[connectios]" > config.toml echo "[connectios.dev]" >>
config.toml echo "account = \"$SNOWFLAKE_ACCOUNT\"" >> config.toml - name: Run
Snowflake query env: SNOWFLAKE_USER: ${{ secrets.SNOWFLAKE_USER }}
SNOWFLAKE_PASSWORD: ${{ secrets.SNOWFLAKE_PASSWORD }} SNOWFLAKE_ACCOUNT: ${{
secrets.SNOWFLAKE_ACCOUNT }} #SNOWFLAKE_WAREHOUSE: ${{
secrets.SNOWFLAKE_WAREHOUSE }} SNOWFLAKE_DATABASE: ${{
secrets.SNOWFLAKE_DATABASE }} SNOWFLAKE_SCHEMA: ${{ secrets.SNOWFLAKE_SCHEMA }}
SNOWFLAKE_ROLE: ${{ secrets.SNOWFLAKE_ROLE }} run: snow --config-file
$GITHUB_WORKSPACE/config.toml sql -q "ALTER GIT REPOSITORY MY_GIT_REPO FETCH"
snow --config-file $GITHUB_WORKSPACE/config.toml sql -q "EXECUTE IMMEDIATE FROM
@MY_GIT_REPO/branches/dev/snowflake_object/My_Snow.sql" #or use a longer version
#snow --config-file $GITHUB_WORKSPACE/config.toml sql -q "EXECUTE IMMEDIATE FROM
@MY_GIT_REPO/branches/dev/snowflake_object/databases/GITHUB/schemas/GITHUB_SCHEMA/tables/my_file.sql"
